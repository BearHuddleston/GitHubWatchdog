{{define "content"}}
<table>
    <thead>
        <tr>
            <th>ID</th>
            <th>Username</th>
            <th>Created</th>
            <th>Stars</th>
            <th>Empty Repos</th>
            <th>Suspicious Empty</th>
            <th>Contributions</th>
            <th>Status</th>
            <th>Processed</th>
        </tr>
    </thead>
    <tbody>
        {{range .Users}}
        <tr>
            <td>{{.ID}}</td>
            <td><a href="https://github.com/{{.Username}}" target="_blank">{{.Username}}</a></td>
            <td class="timestamp">{{.CreatedAt.Format "Jan 02, 2006"}}</td>
            <td>{{.TotalStars}}</td>
            <td>{{.EmptyCount}}</td>
            <td>{{.SuspiciousEmptyCount}}</td>
            <td>{{.Contributions}}</td>
            <td>{{if .AnalysisResult}}<span class="malicious">SUSPICIOUS</span>{{else}}Clean{{end}}</td>
            <td class="timestamp">{{.ProcessedAt.Format "Jan 02, 2006 15:04:05"}}</td>
        </tr>
        {{else}}
        <tr>
            <td colspan="9">No users found</td>
        </tr>
        {{end}}
    </tbody>
</table>

{{if gt .TotalPages 1}}
<div class="pagination">
    {{if gt .Page 1}}
    <a href="/users?page={{subtract .Page 1}}&limit={{.Limit}}">&laquo; Previous</a>
    {{end}}
    
    {{range $i := seq 1 .TotalPages}}
        {{if and (ge $i (subtract $.Page 2)) (le $i (add $.Page 2))}}
            {{if eq $i $.Page}}
            <a href="/users?page={{$i}}&limit={{$.Limit}}" class="active">{{$i}}</a>
            {{else}}
            <a href="/users?page={{$i}}&limit={{$.Limit}}">{{$i}}</a>
            {{end}}
        {{end}}
    {{end}}
    
    {{if lt .Page .TotalPages}}
    <a href="/users?page={{add .Page 1}}&limit={{.Limit}}">Next &raquo;</a>
    {{end}}
</div>
{{end}}
{{end}}